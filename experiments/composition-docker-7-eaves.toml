[metadata]
name = "trickle-performance-test"
author = "Marcel Ebert"

[global]
plan = "trickle-bitswap"
case = "transfer"
builder = "docker:go"
runner = "local:docker"

total_instances = 18

[[groups]]
id = "nodes"
instances = { count = 18 }

[groups.build]
skip_runtime_image = "true"

[groups.run]
[groups.run.test_params]
input_data = "random"
#file_size = "1024"
file_size = "150846"
run_timeout_secs = "60"
timeout_secs = "3000" # 50 minutes
run_count = "100" # reduce to 50 for faster testing
eavesdropper_count = "7"
trickling_delay_ms = "0,50,100,150,200,250,300,350,400"
#trickling_delay_ms = "0,50,100,150,200"
#trickling_delay_ms = "250,300,350,400"
#trickling_delay_ms = "250,300"
#trickling_delay_ms = "350,400"
latency_ms = "50"
jitter_pct = "0" # set jitter to 0 the remove randomness
bandwidth_mb = "100" # set to maxuint64 ?
enable_tcp = "true"

#error while reading socket      {"error": "failed to read JSON message: failed to get reader: received close frame: status = StatusPolicyViolation and reason = \"timed out\""}
